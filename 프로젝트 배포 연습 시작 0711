git 에서 프로젝트를 다운받아서 EC2 서버에 배포 시작

# aws 에서 인스턴스 생성 및 탄력 IP를 받아 인스턴스와 연결 후 시작하였음
# 리눅스 환경에서 실제 프로세스가 작동중이지 않다면 750시간 즉, 사용시간 요금이 부과되지 않음 -> 서버를 종료할 것

#### 진행 사항
1. 자바 설치 (JDK) 
- sudo apt update
- sudo aptt install openjdk-11-jdk -> 너무 많음으로 -> sudo apt-cache search jdk | grep openjdk-11

2. github 다운받기
- git clone https://github.com/codingspecialist/aws-v1.git

3. gradlew 실행권한 주기
- cd ~/aws-v1 =====> cd ~ 경우는 홈으로 이동함
- chmod u+x gradlew -> 실행권한 추가

4. gradlew로 프로젝트를 .jar 파일로 변경하기
- ./gradlew build ======> ./ 를 통해서 현재 경로를 지정해주지 않으면 환경변수 즉 전체에서 찾기 때문에 안 됨

5. java로 .jar 파일을 실행  -> 사용하지 않음
- cd build/libs ----- > 이동
- java -jar *.jar -----> jar 파일이 하나라면 치환이 가능함, 여러가지가 있다면 파일명 입력 후 .jar 

6. nohup 으로 실행
- nohup java -jar 파일명 1>log.out 2>err.out &

7. 시간 변경

----- tip 
# 프로젝트의 build.gradle에서 jar { enabled = false } 를 작성해야 *.plain.jar 파일이 생성되지 않음
-> plain.jar란 -> 모든 의존성 라이브러리를 포함하지 않고 작성된 소스코드의 클래스 파일과 리소스 파일만 포함하게 됨
-> .jar 파일이 두개가 생김

nohup 명령어는 -> 리눅스에서 프로세스를 실행한 터미널의 세션이 끊어지더라도 지속적으로 동작 할 수 있게 해주는 명령어

우리가 포그라운드로 실행했기 때문 -> 포그라운드란 -> 화면에 보이는 것들을 의미함
=> nohup으로 했다고 하더라도 터미널 종료시에 함께 종료되버림 -> 백그라운드로 실행해야함 &
-> nohup java -jar *.jar & --> 백그라운드로 실행했기 때문에 로그를 볼 수 없게됨
-> nohup은 자동으로 log를 남김 -> nohup.out 파일 -> tail -f 통해서 볼 수 있음
-> nohub.out 파일을 다른 파일로 옮겨서 출력하기
- nohup java -jar *.jar > mylog.out & ====> >를 사용하여 입출력 변경 및 & 백그라운드 실행


------ 표준 출력
1. 에러 출력 - 2 -> nohup.out
2. 표준 출력 - 1 -> nohup.out 
=> 모두 nohup.out으로 하기 때문에 나누려고 함

- nohup java -jar 파일명 1 > log.out 2 > err.out & -> 출력에 종류에 따라서 리다이렉션 -> 표준 출력은 log.out에 에러 출력은 err.out에 출력한다는 것
=> 이유 : 배포를 위해서 작성했던 모든 명령어들 -> 스크립트로 작성 ---> 자동화 예정
